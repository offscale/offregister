{
  "name": "Default",
  "description": "Default register strategy",
  "version": "0.0.1",
  "provider": {
    "options": [
      {
        "provider": {
          "name": "EC2",
          "region": "ap-southeast-2"
        },
        "auth": {
          "key": "${env.AWS_KEY_ID}",
          "secret": "${env.AWS_ACCESS_KEY}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}"
        },
        "security_group": [
          "all"
        ],
        "key_name": "${env.PUBLIC_KEY_NAME}"
      },
      {
        "provider": {
          "name": "SOFTLAYER",
          "region": "syd01"
        },
        "auth": {
          "key": "${env.SL_USER}",
          "secret": "${env.SL_KEY}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}"
        }
      },
      {
        "auth": {
          "subscription_id": "${env.AZURE_SUBSCRIPTION}",
          "key_file": "${env.AZURE_KEY_FILE}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}",
          "node_password": "${env.AZURE_NODE_PASSWORD}"
        },
        "create_with": {
          "ex_cloud_service_name": "${env.AZURE_CLOUD_NAME}"
        },
        "provider": {
          "name": "AZURE",
          "region": "Australia East"
        }
      },
      {
        "provider": {
          "name": "DIGITAL_OCEAN",
          "region": "sgp1"
        },
        "auth": {
          "key": "${env.DIGITAL_OCEAN_KEY}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}"
        }
      },
      {
        "provider": {
          "name": "VAGRANT",
          "ex_vagrantfile": "/mnt/large_linux/vagrant/edx-fullstack/Vagrantfile",
          "key": "/mnt/large_linux/vagrant/edx-fullstack/Vagrantfile"
        }
      }
    ]
  },
  "register": {
    "/unclustered/*": [
      {
        "module": "offregister-bootstrap"
      }
    ]
  },
  "_comment_ideas": [
    {
        "module": "offregister-inline",
        "kwargs": {
          "sudo": [
            "echo hello"
          ]
        }
      },
    {
      "module": "offregister-users",
      "kwargs": {
        "add_users": [
          {
            "name": "ubuntu",
            "groups": null
          }
        ]
      }
    },
    {
      "module": "offregister-openedx",
      "cluster_name": "openedx_ficus0",
      "args": [],
      "kwargs": {}
    },
    {
      "purpose": "STRING",
      "env": {
        "args": [],
        "kwargs": {},
        "_comment": "top-level env takes precedence by default"
      },
      "modules": [
        {
          "module": "offregister-nginx",
          "cluster_name": "static0",
          "stateful": false,
          "run_cmds": {
            "op": ">=",
            "val": 2
          },
          "env_precedence": "local_first",
          "dependencies": [
            {
              "type": "system",
              "uses": "apt"
            },
            "_comment: limits concurrency because of system-wide lock"
          ]
        },
        {
          "module": "offregister-odoo",
          "cluster_name": "odoo0",
          "args": [],
          "kwargs": {},
          "inherit_env": false,
          "dependencies": [
            {
              "type": "module",
              "name": "offregister-nginx"
            },
            "_comment: Run independent modules concurrently"
          ]
        }
      ]
    }
  ],
  "_comments": [
    {
      "/local_unclustered/*": [
        {
          "module": "offregister-githook",
          "cluster_name": "grc-githook",
          "args": [],
          "kwargs": {
            "hookserve-init-name": "hookserve_foo.conf",
            "git_pull-init-context": {
              "GIT_REPO": "https://github.com/SamuelMarks/foo-dist.git",
              "GIT_DIR": "/var/www/static/foo-dist"
            },
            "git_pull-init-name": "git_pull_foo.conf"
          }
        }
      ]
    },
    {
      "/unclustered/*": [
        {
          "module": "offregister-githook",
          "cluster_name": "grc-githook",
          "args": [],
          "kwargs": {
            "hookserve-init-name": "hookserve_foo.conf",
            "git_pull-init-context": {
              "GIT_REPO": "https://github.com/SamuelMarks/foo-dist.git",
              "GIT_DIR": "/var/www/static/foo-dist"
            },
            "git_pull-init-name": "git_pull_foo.conf"
          }
        },
        {
          "module": "offregister-angular2",
          "cluster_name": "bar-frontend",
          "args": [],
          "kwargs": {
            "GIT_REPO": "https://github.com/bar/web-frontend-dist",
            "SERVER_LOCATION": "/var/www/static/bar-frontend-dist",
            "SERVER_NAME": "bar.*",
            "nginx-conf-filename": "bar-frontend-dist"
          }
        },
        {
          "module": "offregister-githook",
          "cluster_name": "bar-frontend",
          "args": [],
          "kwargs": {
            "hookserve-init-name": "hookserve_bar-frontend.conf",
            "hookserve-init-context": {
              "PID": "/var/run/hookserve_bar-frontend.pid",
              "DAEMON_PORT": 8889
            },
            "git_pull-init-context": {
              "GIT_DIR": "/var/www/static/bar-frontend-dist",
              "GIT_REPO": "https://github.com/bar/web-frontend-dist"
            },
            "git_pull-init-name": "git_pull_bar.conf"
          }
        }
      ]
    },
    {
      "module": "offregister-angular2",
      "cluster_name": "foo",
      "args": [],
      "kwargs": {
        "GIT_REPO": "https://github.com/SamuelMarks/foo-dist.git",
        "SERVER_LOCATION": "/var/www/foo",
        "SERVER_NAME": "foo.*",
        "nginx-conf-filename": "foo-dist"
      }
    },
    {
      "module": "offregister-nginx",
      "cluster_name": "foo",
      "args": [],
      "kwargs": {
        "nginx-init-context": {
          "SERVER_NAME": "foo.*",
          "NAME_OF_BLOCK": "static0",
          "SERVER_LOCATION": "unix:/run/foo.sock"
        }
      },
      "run_cmds": {
        "op": "<=",
        "val": 2,
        "exclude": [
          "setup_nginx_conf2"
        ]
      }
    },
    {
      "module": "offregister-odoo",
      "cluster_name": "odoo0",
      "args": [],
      "kwargs": {}
    },
    {
      "_local_tmp": [
        {
          "module": "offregister-openedx",
          "cluster_name": "openedx0_local",
          "args": [],
          "kwargs": {},
          "run_cmds": {
            "op": ">=",
            "val": 2
          }
        }
      ]
    },
    {
      "/unclustered/*": [
        {
          "module": "offregister-openedx",
          "cluster_name": "openedx0",
          "args": [],
          "kwargs": {},
          "run_cmds": {
            "op": ">=",
            "val": 2
          }
        }
      ]
    },
    {
      "module": "offregister-etcd",
      "cluster_name": "etcd0",
      "args": [],
      "kwargs": {
        "exclusive_cluster": false
      }
    },
    {
      "module": "offregister-mesosphere-dcos",
      "cluster_name": "",
      "args": [],
      "kwargs": {
        "nodes_from": "%etcd0%"
      }
    },
    {
      "module": "offregister-dokku",
      "kwargs": {
        "domain": "scientific.sydney",
        "static_git": "https://github.com/offscale/scientific.sydney-dist"
      }
    },
    {
      "module": "offregister-dokku"
    },
    {
      "module": "offregister-ceph"
    },
    {
      "module": "offregister-zookeeper"
    },
    {
      "module": "offregister-mesos"
    },
    {
      "module": "offregister-taiga"
    },
    {
      "module": "dokku"
    },
    {
      "module": "tsuru"
    },
    {
      "module": "coreos"
    },
    {
      "module": "deis"
    },
    {
      "module": "flynn"
    },
    {
      "module": "coreos"
    },
    {
      "module": "bosh"
    },
    {
      "module": "consul"
    }
  ],
  "purpose": [
    "any-cluster"
  ],
  "etcd_server": "http://localhost:2379",
  "default_pick": "first"
}