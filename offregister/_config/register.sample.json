{
  "name": "Default",
  "description": "Default register strategy",
  "version": "0.0.1",
  "provider": {
    "options": [
      {
        "provider": {
          "name": "EC2",
          "region": "ap-southeast-2"
        },
        "auth": {
          "key": "${env.AWS_KEY_ID}",
          "secret": "${env.AWS_ACCESS_KEY}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}"
        },
        "security_group": [
          "all"
        ],
        "key_name": "${env.PUBLIC_KEY_NAME}"
      },
      {
        "provider": {
          "name": "SOFTLAYER",
          "region": "syd01"
        },
        "auth": {
          "key": "${env.SL_USER}",
          "secret": "${env.SL_KEY}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}"
        }
      },
      {
        "auth": {
          "subscription_id": "${env.AZURE_SUBSCRIPTION}",
          "key_file": "${env.AZURE_KEY_FILE}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}",
          "node_password": "${env.AZURE_NODE_PASSWORD}"
        },
        "create_with": {
          "ex_cloud_service_name": "${env.AZURE_CLOUD_NAME}"
        },
        "provider": {
          "name": "AZURE",
          "region": "Australia East"
        }
      },
      {
        "provider": {
          "name": "DIGITAL_OCEAN",
          "region": "sgp1"
        },
        "auth": {
          "key": "${env.DIGITAL_OCEAN_KEY}"
        },
        "ssh": {
          "public_key_path": "${env.PUBLIC_KEY_PATH}",
          "private_key_path": "${env.PRIVATE_KEY_PATH}",
          "key_name": "${env.PUBLIC_KEY_NAME}"
        }
      },
      {
        "provider": {
          "name": "VAGRANT",
          "ex_vagrantfile": "/mnt/large_linux/vagrant/edx-fullstack/Vagrantfile",
          "key": "/mnt/large_linux/vagrant/edx-fullstack/Vagrantfile"
        }
      }
    ]
  },
  "register": {
    "/unclustered/any-cluster-ubuntu1604-bighd-0c79ca28239a44dfba7ef382e382ab70": [
      {
        "module": "inline0",
        "type": "ansible",
        "source": {
          "name": "inline0",
          "gather_facts": "no",
          "tasks": [
            {
              "action": {
                "args": "lsb_release -a",
                "module": "shell"
              },
              "register": "shell_out"
            },
            {
              "action": {
                "args": {
                  "msg": "{{shell_out.stdout}}"
                },
                "module": "debug"
              }
            }
          ]
        }
      },
      {
        "_comments": [
          {
            "module": "offregister-bootstrap",
            "type": "fabric"
          },
          {
            "module": "offregister-inline",
            "kwargs": {
              "run": [
                "echo hello"
              ]
            },
            "type": "fabric"
          },
          {
            "module": "offregister-bootstrap",
            "type": "fabric"
          },
          {
            "module": "offregister-openedx",
            "cluster_name": "local__openedx-ficus.1rc1",
            "args": [],
            "kwargs": {},
            "type": "fabric"
          }
        ]
      }
    ]
  },
  "_comment_ideas": [
    {
      "module": "offregister-users",
      "kwargs": {
        "add_users": [
          {
            "name": "ubuntu",
            "groups": null
          }
        ]
      },
      "type": "fabric"
    },
    {
      "purpose": "STRING",
      "env": {
        "args": [],
        "kwargs": {},
        "_comment": "top-level env takes precedence by default"
      },
      "modules": [
        {
          "module": "offregister-nginx",
          "cluster_name": "static0",
          "stateful": false,
          "run_cmds": {
            "op": ">=",
            "val": 2
          },
          "env_precedence": "local_first",
          "dependencies": [
            {
              "type": "system",
              "uses": "apt"
            },
            "_comment: limits concurrency because of system-wide lock"
          ],
          "type": "fabric"
        },
        {
          "module": "offregister-odoo",
          "cluster_name": "odoo0",
          "args": [],
          "kwargs": {},
          "inherit_env": false,
          "dependencies": [
            {
              "type": "module",
              "name": "offregister-nginx"
            },
            "_comment: Run independent modules concurrently"
          ],
          "type": "fabric"
        }
      ]
    }
  ],
  "_comments": [
    {
      "/local_unclustered/*": [
        {
          "args": [],
          "cluster_name": "grc-githook",
          "kwargs": {
            "git_pull-init-context": {
              "GIT_DIR": "/var/www/static/foo-dist",
              "GIT_REPO": "https://github.com/SamuelMarks/foo-dist.git"
            },
            "git_pull-init-name": "git_pull_foo.conf",
            "hookserve-init-name": "hookserve_foo.conf"
          },
          "module": "offregister-githook"
        }
      ],
      "type": "fabric"
    },
    {
      "/unclustered/*": [
        {
          "args": [],
          "cluster_name": "grc-githook",
          "kwargs": {
            "git_pull-init-context": {
              "GIT_DIR": "/var/www/static/foo-dist",
              "GIT_REPO": "https://github.com/SamuelMarks/foo-dist.git"
            },
            "git_pull-init-name": "git_pull_foo.conf",
            "hookserve-init-name": "hookserve_foo.conf"
          },
          "module": "offregister-githook"
        },
        {
          "args": [],
          "cluster_name": "bar-frontend",
          "kwargs": {
            "GIT_REPO": "https://github.com/bar/web-frontend-dist",
            "SERVER_LOCATION": "/var/www/static/bar-frontend-dist",
            "SERVER_NAME": "bar.*",
            "nginx-conf-filename": "bar-frontend-dist"
          },
          "module": "offregister-angular2"
        },
        {
          "args": [],
          "cluster_name": "bar-frontend",
          "kwargs": {
            "git_pull-init-context": {
              "GIT_DIR": "/var/www/static/bar-frontend-dist",
              "GIT_REPO": "https://github.com/bar/web-frontend-dist"
            },
            "git_pull-init-name": "git_pull_bar.conf",
            "hookserve-init-context": {
              "DAEMON_PORT": 8889,
              "PID": "/var/run/hookserve_bar-frontend.pid"
            },
            "hookserve-init-name": "hookserve_bar-frontend.conf"
          },
          "module": "offregister-githook"
        }
      ],
      "type": "fabric"
    },
    {
      "args": [],
      "cluster_name": "foo",
      "kwargs": {
        "GIT_REPO": "https://github.com/SamuelMarks/foo-dist.git",
        "SERVER_LOCATION": "/var/www/foo",
        "SERVER_NAME": "foo.*",
        "nginx-conf-filename": "foo-dist"
      },
      "module": "offregister-angular2",
      "type": "fabric"
    },
    {
      "args": [],
      "cluster_name": "foo",
      "kwargs": {
        "nginx-init-context": {
          "NAME_OF_BLOCK": "static0",
          "SERVER_LOCATION": "unix:/run/foo.sock",
          "SERVER_NAME": "foo.*"
        }
      },
      "module": "offregister-nginx",
      "run_cmds": {
        "exclude": [
          "setup_nginx_conf2"
        ],
        "op": "<=",
        "val": 2
      },
      "type": "fabric"
    },
    {
      "args": [],
      "cluster_name": "odoo0",
      "kwargs": {},
      "module": "offregister-odoo",
      "type": "fabric"
    },
    {
      "_local_tmp": [
        {
          "args": [],
          "cluster_name": "openedx0_local",
          "kwargs": {},
          "module": "offregister-openedx",
          "run_cmds": {
            "op": ">=",
            "val": 2
          }
        }
      ],
      "type": "fabric"
    },
    {
      "/unclustered/*": [
        {
          "args": [],
          "cluster_name": "openedx0",
          "kwargs": {},
          "module": "offregister-openedx",
          "run_cmds": {
            "op": ">=",
            "val": 2
          }
        }
      ],
      "type": "fabric"
    },
    {
      "args": [],
      "cluster_name": "etcd0",
      "kwargs": {
        "exclusive_cluster": false
      },
      "module": "offregister-etcd",
      "type": "fabric"
    },
    {
      "args": [],
      "cluster_name": "",
      "kwargs": {
        "nodes_from": "%etcd0%"
      },
      "module": "offregister-mesosphere-dcos",
      "type": "fabric"
    },
    {
      "kwargs": {
        "domain": "scientific.sydney",
        "static_git": "https://github.com/offscale/scientific.sydney-dist"
      },
      "module": "offregister-dokku",
      "type": "fabric"
    },
    {
      "module": "offregister-dokku",
      "type": "fabric"
    },
    {
      "module": "offregister-ceph",
      "type": "fabric"
    },
    {
      "module": "offregister-zookeeper",
      "type": "fabric"
    },
    {
      "module": "offregister-mesos",
      "type": "fabric"
    },
    {
      "module": "offregister-taiga",
      "type": "fabric"
    },
    {
      "module": "dokku",
      "type": "fabric"
    },
    {
      "module": "tsuru",
      "type": "fabric"
    },
    {
      "module": "coreos",
      "type": "fabric"
    },
    {
      "module": "deis",
      "type": "fabric"
    },
    {
      "module": "flynn",
      "type": "fabric"
    },
    {
      "module": "coreos",
      "type": "fabric"
    },
    {
      "module": "bosh",
      "type": "fabric"
    },
    {
      "module": "consul",
      "type": "fabric"
    }
  ],
  "purpose": [
    "any-cluster"
  ],
  "etcd_server": "http://localhost:2379",
  "default_pick": "first"
}
